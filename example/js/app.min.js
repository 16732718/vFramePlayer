var loadImages=function(a){var e=a.loadArr;var t="";var n=0;var o={};var r=e.length;for(var s in e){var i=s;o[i]=new Image;o[i].onload=function(){n++;if(n>=r){a.complete(o)}};o[i].onerror=function(){n++;if(n>=r){a.complete(o)}};o[i].src=e[i]}};$(document).ready(function(){var a=$(".info");var e=$(".process");var t;var n=[];for(var o=0;o<151;o++){n.push("image/"+o+".jpg")}loadImages({loadArr:n,complete:function(){t=new FramePlayer({dom:$(".framePlayer")[0],imgArr:n,loop:3,yoyo:true,useCanvas:true});t.goto(t.get("startFrame"));var o=function(){$(".yoyo").attr("checked",t.get("yoyo"));$(".times").val(t.get("loop"));$(".fps").val(t.get("fps"));$(".start").val(t.get("startFrame")).attr("max",n.length-1);$(".end").val(t.get("endFrame")).attr("max",n.length-1);var a=t.get("useCanvas")?0:1;$(".mode[name='mode']").eq(a).attr("checked","true")};o();t.on("play",function(){console.log("开始播放");$(".start").attr("disabled",true).addClass("disabled");$(".end").attr("disabled",true).addClass("disabled");o()});t.on("stop",function(){console.log("停止播放");$(".start").attr("disabled",false).removeClass("disabled");$(".end").attr("disabled",false).removeClass("disabled")});t.on("pause",function(){console.log("暂停播放")});t.on("update",function(o,r,s){a.find(".curFrame").find("span").text(o);a.find(".times").find("span").text(r);a.find(".asc").find("span").text(s);a.find(".fps").find("span").text(t.get("fps"));var i=n.length-1;var c=100/i;e.css({width:o*c+"%"})});$(".fa-play").on("click",function(){var a=$(".fps").val();var e=$(".yoyo").is(":checked");var n=$(".start").val();var o=$(".end").val();var r=$("input[name='mode']:checked").val();var s=r==="true";t.play(n,o,{fps:a,yoyo:e,useCanvas:s,onComplete:function(){},onUpdate:function(a,e,t){}})});$(".fa-pause").on("click",function(){t.pause()});$(".fa-stop").on("click",function(){t.stop()});$(".fa-backward").on("click",function(){var a=t.get("fps");if(Math.round(a/1.5)>0){t.set("fps",Math.round(a/1.5))}});$(".fa-forward").on("click",function(){var a=t.get("fps");if(Math.round(a*1.5)<60){t.set("fps",Math.round(a*1.5))}});$(".mode").on("change",function(){var a=$("input[name='mode']:checked").val();var e=a==="true";t.set("useCanvas",e)});$(".times").on("change",function(){var a=$(this).val();t.set("loop",a)});$(".start").on("change",function(){var a=$(this).val();t.set("startFrame",a)});$(".end").on("change",function(){var a=$(this).val();t.set("endFrame",a)});$(".fps").on("change",function(){var a=$(this).val();t.set("fps",a)});$(".yoyo").on("change",function(){var a=$(this).is(":checked");t.set("yoyo",a)})}})});